<!doctype html><html class=nojs lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>ç‰›å®¢2025ç§‹å­£ç®—æ³•ç¼–ç¨‹è®­ç»ƒè”èµ›6-åŸºç¡€ç»„ â€“ ç»ƒä¹ æœ¬</title><meta name=created content="2025-11-20T00:03:51+0800"><meta name=modified content="2025-11-20T00:03:51+0800"><meta name=author content="4hh"><meta name=contact content="abelhyphenabel@gmail.com"><meta property="og:site_name" content="ç»ƒä¹ æœ¬"><meta property="og:title" content="ç‰›å®¢2025ç§‹å­£ç®—æ³•ç¼–ç¨‹è®­ç»ƒè”èµ›6-åŸºç¡€ç»„"><meta property="og:url" content="https://4hh.github.io/misc/nowcoder-2025-fall-6/"><meta property="og:type" content="article"><meta property="og:image" content="https://4hh.github.io/apple-touch-icon.png"><meta name=generator content="Hugo 0.152.2"><link rel=canonical href=https://4hh.github.io/misc/nowcoder-2025-fall-6/><link rel=apple-touch-icon href=/apple-touch-icon.png><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=manifest href=/site.webmanifest><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=stylesheet href=/css/styles.0e872d2201ff9e3f5960638608454cddfc35595a5107e23908f316ad8e7ab1ea.css><link rel=stylesheet href=/css/mobilemenu.dbbf7de443967fe1d83dce47fb19895d79710b23ccd02b84f54d4d39c37e3d2d.css media=screen><link rel=stylesheet href=/css/print.1912ba13950e7434fb50dd14d3951bc7f57bb0c16b4f204158b72f0b3844f7a1.css media=print><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","headline":"ç‰›å®¢2025ç§‹å­£ç®—æ³•ç¼–ç¨‹è®­ç»ƒè”èµ›6-åŸºç¡€ç»„","datePublished":"2025-11-20T00:03:51+08:00","dateModified":"2025-11-20T00:03:51+08:00","url":"https://4hh.github.io/misc/nowcoder-2025-fall-6/","keywords":"ç‰›å®¢ åŒæŒ‡é’ˆ äºŒåˆ† ç»„åˆæ•°å­¦ DFS","image":"https://4hh.github.io/apple-touch-icon.png","author":{"@type":"Person","name":"4hh"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://4hh.github.io/"},"publisher":{"@type":"Organization","name":"ç»ƒä¹ æœ¬","logo":{"@type":"ImageObject","url":"https://4hh.github.io/apple-touch-icon.png"},"url":"https://4hh.github.io/"}}</script><script>(()=>{(function(){document.querySelector("html").classList.replace("nojs","js")})()})()</script><script defer src=/js/mobilemenu.7ce1f75fd1d49cd683a008352ad9001f800349629be01d531a19c02b5a84817b.js></script><script defer src=/js/codeblocks.6fb7809f1f612b9e1b838024f9517fe705761b9807a432b7708302ee3cec2808.js></script><script defer src=/js/script.f2979a93a325fecf9605263bd141398a311c8e23388ed7dcff74f92f7e632866.js></script><link rel=stylesheet href=/katex/katex.min.css><script defer src=/katex/katex.min.js></script><script defer src=/katex/contrib/auto-render.min.js></script><script defer src=/js/math.709e7cabd87ed8a988dc621ae40e371b50aca901ad9b6afadefac3e376945193.js></script><script src=/js/tracking.9222737f77e3c1f776b582208287ee51c0f0f1f966272abd374f8a51e1d35349.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-2EEKTZH351"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-2EEKTZH351")}</script></head><body class=single-page><div class="page layout__page"><header class="header layout__header"><a href=/ title=Home rel=home class=header__logo><img src=/images/logo.png width=64 height=64 alt=Home class=header__logo-image></a><h1 class=header__site-name><a href=/ title=Home class=header__site-link rel=home><span>ç»ƒä¹ æœ¬</span></a></h1><div class="region header__region"></div></header><nav class="main-menu mx--xs layout__navigation" aria-label="Main menu"><ul class="flex-inline mx--0"><li><a href=/><span>é¦–é¡µ</span></a></li><li><a href=/atcoder/><span>AtCoder</span></a></li><li><a href=/codeforces/><span>Codeforces</span></a></li><li><a href=/leetcode/><span>LeetCode</span></a></li><li><a href=/misc/ aria-current=page><span>å…¶ä»–</span></a></li><li><a href=/templates/><span>æ¨¡æ¿</span></a></li><li><a href=/tutorial/><span>ç®—æ³•ç«èµ›è¿›é˜¶æŒ‡å—</span></a></li><li><a href=/search/><span>æœç´¢</span></a></li></ul></nav><div class=mobile-nav dir=ltr hidden><div class=mobile-nav__cover></div><button class="mobile-nav__toggle button" aria-expanded=false aria-controls=sheet>
Menu
<svg class="mobile-nav__hamburger" viewBox="0 0 100 100" focusable="false" aria-hidden="true"><rect width="80" height="12" x="10" y="20" rx="5"/><rect width="80" height="12" x="10" y="45" rx="5"/><rect width="80" height="12" x="10" y="70" rx="5"/></svg></button><div class="mobile-nav__sheet link-inverted link-nav" id=sheet aria-hidden=true><div class=mobile-nav__region></div><nav class=mobile-nav__main-menu aria-label="Main menu"><ul class=mobile-nav__navbar><li><a href=/><span>é¦–é¡µ</span></a></li><li><a href=/atcoder/><span>AtCoder</span></a></li><li><a href=/codeforces/><span>Codeforces</span></a></li><li><a href=/leetcode/><span>LeetCode</span></a></li><li><a href=/misc/ aria-current=page><span>å…¶ä»–</span></a></li><li><a href=/templates/><span>æ¨¡æ¿</span></a></li><li><a href=/tutorial/><span>ç®—æ³•ç«èµ›è¿›é˜¶æŒ‡å—</span></a></li><li><a href=/search/><span>æœç´¢</span></a></li></ul></nav></div></div><main class="main layout__main"><article class="single-view single-view--misc"><header><h1 class=title>ç‰›å®¢2025ç§‹å­£ç®—æ³•ç¼–ç¨‹è®­ç»ƒè”èµ›6-åŸºç¡€ç»„</h1><div class="tags meta">Tags:<ul class="flex-inline flex-inline--inline"><li><a href=/tags/%E7%89%9B%E5%AE%A2/>ç‰›å®¢</a></li><li><a href=/tags/%E5%8F%8C%E6%8C%87%E9%92%88/>åŒæŒ‡é’ˆ</a></li><li><a href=/tags/%E4%BA%8C%E5%88%86/>äºŒåˆ†</a></li><li><a href=/tags/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/>ç»„åˆæ•°å­¦</a></li><li><a href=/tags/dfs/>DFS</a></li></ul></div></header><p>é¢˜ç›®ğŸ”— <a href=https://ac.nowcoder.com/acm/contest/120455#question>ç‰›å®¢2025ç§‹å­£ç®—æ³•ç¼–ç¨‹è®­ç»ƒè”èµ›6-åŸºç¡€ç»„</a></p><h1 id=a-ç­¾åˆ°é¢˜>A. ç­¾åˆ°é¢˜</h1><p>ä¸‰æ¡è¾¹æ„æˆä¸‰è§’å½¢çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯ï¼šå‡è®¾ $a \le b \le c$ ï¼Œæ»¡è¶³ $a + b \lt c$</p><p>é¢˜ç›®ç»™å‡ºçš„æ ·ä¾‹æœ‰ä¸€ç‚¹è¯¯å¯¼æ€§ï¼Œå¼€å§‹ä»¥ä¸ºéœ€è¦ç­‰è…°ä¸‰è§’å½¢æ‰å¯ä»¥ï¼Œå…¶å®å¹¶ä¸æ˜¯ã€‚</p><p>å¦‚æœèƒ½å¤Ÿç»„æˆä¸‰è§’å½¢ï¼Œé‚£ä¹ˆå¿…å®šèƒ½å¤Ÿæ„é€ ä¸‰ä¸ªåœ†å¤–åˆ‡ã€‚è®¾å®ƒä»¬çš„åŠå¾„åˆ†åˆ«æ˜¯ $r_1, r_2, r_3$ , é‚£ä¹ˆæ»¡è¶³ $r_1 + r_2 = a, r_1 + r_3 = b, r_2 + r_3 = c$ ï¼Œæ±‚è§£è¿™ä¸ªä¸‰å…ƒä¸€æ¬¡æ–¹ç¨‹ç»„ã€‚</p><div data-codeblock itemscope itemtype=https://schema.org/SoftwareSourceCode><button data-codebutton class=codebutton title="Copy code"><span>â§‰</span></button>
<meta itemprop=codeSampleType content="snippet"><meta data-codetext itemprop=text content='"void solve() {\n  vector\u003cint\u003e a(3);\n  For(i, 0, 3) cin \u003e\u003e a[i];\n  sort(all(a));\n\n  if (a[0] + a[1] \u003e a[2]) {\n    vector\u003cdouble\u003e arr(3);\n    arr[1] = (1.0 * a[0] + a[1] - a[2]) / 2;\n    arr[2] = a[1] - arr[1];\n    arr[0] = a[0] - arr[1];\n    sort(all(arr));\n    cout \u003c\u003c \"Yes\\n\";\n    for (auto i : arr) {\n      cout \u003c\u003c fixed \u003c\u003c setprecision(2) \u003c\u003c i \u003c\u003c &#39; &#39;;\n    }\n    cout \u003c\u003c &#39;\\n&#39;;\n  } else {\n    cout \u003c\u003c \"wtnl\\n\";\n  }\n}"'><meta itemprop=programmingLanguage content="cpp"><pre tabindex=0 class=chroma>
<code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>solve</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  vector<span style=color:#0550ae>&lt;</span><span style=color:#cf222e>int</span><span style=color:#0550ae>&gt;</span> a<span style=color:#1f2328>(</span><span style=color:#0550ae>3</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  For<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>3</span><span style=color:#1f2328>)</span> cin <span style=color:#0550ae>&gt;&gt;</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>  sort<span style=color:#1f2328>(</span>all<span style=color:#1f2328>(</span>a<span style=color:#1f2328>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>a<span style=color:#1f2328>[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>+</span> a<span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>&gt;</span> a<span style=color:#1f2328>[</span><span style=color:#0550ae>2</span><span style=color:#1f2328>])</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    vector<span style=color:#0550ae>&lt;</span><span style=color:#cf222e>double</span><span style=color:#0550ae>&gt;</span> arr<span style=color:#1f2328>(</span><span style=color:#0550ae>3</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    arr<span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>(</span><span style=color:#0550ae>1.0</span> <span style=color:#0550ae>*</span> a<span style=color:#1f2328>[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>+</span> a<span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>-</span> a<span style=color:#1f2328>[</span><span style=color:#0550ae>2</span><span style=color:#1f2328>])</span> <span style=color:#0550ae>/</span> <span style=color:#0550ae>2</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    arr<span style=color:#1f2328>[</span><span style=color:#0550ae>2</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> a<span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>-</span> arr<span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>    arr<span style=color:#1f2328>[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> a<span style=color:#1f2328>[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>-</span> arr<span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>    sort<span style=color:#1f2328>(</span>all<span style=color:#1f2328>(</span>arr<span style=color:#1f2328>));</span>
</span></span><span style=display:flex><span>    cout <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#34;Yes</span><span style=color:#0a3069>\n</span><span style=color:#0a3069>&#34;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>auto</span> <span style=color:#900;font-weight:700>i</span> <span style=color:#1f2328>:</span> arr<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      cout <span style=color:#0550ae>&lt;&lt;</span> fixed <span style=color:#0550ae>&lt;&lt;</span> setprecision<span style=color:#1f2328>(</span><span style=color:#0550ae>2</span><span style=color:#1f2328>)</span> <span style=color:#0550ae>&lt;&lt;</span> i <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39; &#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>    cout <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39;\n&#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    cout <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#34;wtnl</span><span style=color:#0a3069>\n</span><span style=color:#0a3069>&#34;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code>
</pre></div><h1 id=b-æ‹¬å·åºåˆ—>B. æ‹¬å·åºåˆ—</h1><p>è¿™é“é¢˜æ¯” A ç®€å•ã€‚</p><p>æˆ‘ä»¬åªéœ€è¦æ±‚å‡ºä¸åŒ¹é…çš„æ‹¬å·çš„ä¸ªæ•°ï¼Œåªæœ‰ä¸¤ç§æƒ…å†µä¸åŒ¹é…ï¼šå‰©ä½™çš„å·¦æ‹¬å·ï¼Œä¸èƒ½è¢«åŒ¹é…æ‰çš„å³æ‹¬å·ã€‚</p><div data-codeblock itemscope itemtype=https://schema.org/SoftwareSourceCode><button data-codebutton class=codebutton title="Copy code"><span>â§‰</span></button>
<meta itemprop=codeSampleType content="snippet"><meta data-codetext itemprop=text content="&#34;void solve() {\n  int n;\n  string s;\n  cin \u003e\u003e n \u003e\u003e s;\n\n  int ans{}, cur = 0;\n  for (auto c : s) {\n    if (c == '(')\n      cur++;\n    else {\n      if (cur \u003e 0)\n        cur--;\n      else\n        ans++;\n    }\n  }\n\n  ans += cur;\n  cout \u003c\u003c ans \u003c\u003c '\\n';\n}&#34;"><meta itemprop=programmingLanguage content="cpp"><pre tabindex=0 class=chroma>
<code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>solve</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  string s<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  cin <span style=color:#0550ae>&gt;&gt;</span> n <span style=color:#0550ae>&gt;&gt;</span> s<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> ans<span style=color:#1f2328>{},</span> cur <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>auto</span> <span style=color:#900;font-weight:700>c</span> <span style=color:#1f2328>:</span> s<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>c <span style=color:#0550ae>==</span> <span style=color:#0a3069>&#39;(&#39;</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>      cur<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>cur <span style=color:#0550ae>&gt;</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>        cur<span style=color:#0550ae>--</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>      <span style=color:#cf222e>else</span>
</span></span><span style=display:flex><span>        ans<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ans <span style=color:#0550ae>+=</span> cur<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  cout <span style=color:#0550ae>&lt;&lt;</span> ans <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39;\n&#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code>
</pre></div><h1 id=c-åå­—é˜µåˆ—>C. åå­—é˜µåˆ—</h1><p>è®°å½•ç¬¬ $i$ è¡Œæ€»çš„ä¼¤å®³æ•°ï¼Œè®°å½•ç¬¬ $j$ åˆ—æ€»çš„ä¼¤å®³æ•°ã€‚å¦‚æœæŠŠè¿™ä¸¤éƒ¨åˆ†åŠ èµ·æ¥ï¼Œé‚£ä¹ˆä½ç½® $(i, j)$ çš„ä¼¤å®³ä¼šè¢«è®¡ç®—ä¸¤æ¬¡ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è®°å½•ä¸‹ $(i, j)$ æœ€ååº”è¯¥éœ€è¦å‡å»çš„ä¼¤å®³æ•°ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°æ¯ä¸ªä½ç½®æœ€åå®é™…çš„ä¼¤å®³æ•°ã€‚</p><div data-codeblock itemscope itemtype=https://schema.org/SoftwareSourceCode><button data-codebutton class=codebutton title="Copy code"><span>â§‰</span></button>
<meta itemprop=codeSampleType content="snippet"><meta data-codetext itemprop=text content="&#34;const int N = 2010;\nll a[N][N], col[N], row[N];\n\nvoid solve() {\n  int n, m, h;\n  cin \u003e\u003e n \u003e\u003e m \u003e\u003e h;\n\n  For1(i, 1, n) {\n    row[i] = 0;\n    For1(j, 1, m) a[i][j] = 0;\n  }\n  For1(j, 1, m) col[j] = 0;\n\n  For(i, 0, h) {\n    int x, y, z;\n    cin \u003e\u003e x \u003e\u003e y \u003e\u003e z;\n    row[x] += z;\n    col[y] += z;\n    a[x][y] += z;\n  }\n\n  ll ans = 0;\n  For1(i, 1, n) {\n    For1(j, 1, m) {\n      ll tmp = row[i] + col[j] - a[i][j];\n      ans = (ans + (tmp * (i + j) % MOD)) % MOD;\n    }\n  }\n  cout \u003c\u003c ans \u003c\u003c '\\n';\n}&#34;"><meta itemprop=programmingLanguage content="cpp"><pre tabindex=0 class=chroma>
<code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#cf222e>const</span> <span style=color:#cf222e>int</span> N <span style=color:#0550ae>=</span> <span style=color:#0550ae>2010</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>ll a<span style=color:#1f2328>[</span>N<span style=color:#1f2328>][</span>N<span style=color:#1f2328>],</span> col<span style=color:#1f2328>[</span>N<span style=color:#1f2328>],</span> row<span style=color:#1f2328>[</span>N<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>solve</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> n<span style=color:#1f2328>,</span> m<span style=color:#1f2328>,</span> h<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  cin <span style=color:#0550ae>&gt;&gt;</span> n <span style=color:#0550ae>&gt;&gt;</span> m <span style=color:#0550ae>&gt;&gt;</span> h<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  For1<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    row<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    For1<span style=color:#1f2328>(</span>j<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> m<span style=color:#1f2328>)</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>][</span>j<span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  For1<span style=color:#1f2328>(</span>j<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> m<span style=color:#1f2328>)</span> col<span style=color:#1f2328>[</span>j<span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  For<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>,</span> h<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>int</span> x<span style=color:#1f2328>,</span> y<span style=color:#1f2328>,</span> z<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    cin <span style=color:#0550ae>&gt;&gt;</span> x <span style=color:#0550ae>&gt;&gt;</span> y <span style=color:#0550ae>&gt;&gt;</span> z<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    row<span style=color:#1f2328>[</span>x<span style=color:#1f2328>]</span> <span style=color:#0550ae>+=</span> z<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    col<span style=color:#1f2328>[</span>y<span style=color:#1f2328>]</span> <span style=color:#0550ae>+=</span> z<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    a<span style=color:#1f2328>[</span>x<span style=color:#1f2328>][</span>y<span style=color:#1f2328>]</span> <span style=color:#0550ae>+=</span> z<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ll ans <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  For1<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    For1<span style=color:#1f2328>(</span>j<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> m<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      ll tmp <span style=color:#0550ae>=</span> row<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>+</span> col<span style=color:#1f2328>[</span>j<span style=color:#1f2328>]</span> <span style=color:#0550ae>-</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>][</span>j<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>      ans <span style=color:#0550ae>=</span> <span style=color:#1f2328>(</span>ans <span style=color:#0550ae>+</span> <span style=color:#1f2328>(</span>tmp <span style=color:#0550ae>*</span> <span style=color:#1f2328>(</span>i <span style=color:#0550ae>+</span> j<span style=color:#1f2328>)</span> <span style=color:#0550ae>%</span> MOD<span style=color:#1f2328>))</span> <span style=color:#0550ae>%</span> MOD<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  cout <span style=color:#0550ae>&lt;&lt;</span> ans <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39;\n&#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code>
</pre></div><h1 id=d-é…å¯¹>D. é…å¯¹</h1><p>å®¹æ˜“æƒ³åˆ°æˆ‘ä»¬å¯ä»¥å¯¹ç­”æ¡ˆè¿›è¡ŒäºŒåˆ†ï¼Œè®¾æœ€ç»ˆçš„ç­”æ¡ˆæ˜¯ $sum$ ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯ä¸¤ä¸ªæ•°ç»„ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ„é€ å‡ºæ•°å¯¹å’Œ $\ge sum$ çš„æ•°å¯¹çš„æ•°é‡ $\ge k$ ã€‚æ­¤æ—¶æœ€å¤§ $sum$ å°±æ˜¯æ‰€æ±‚ã€‚</p><p>æ¥ä¸‹æ¥è€ƒè™‘å¯¹äºç»™å®šçš„ $sum$ ï¼Œå¦‚ä½•æ‰¾åˆ°è¿™æ ·çš„æ•°å¯¹çš„æ•°é‡ï¼Œä½¿å¾—æ¯ä¸ªæ•°å¯¹çš„å’Œéƒ½ $\ge sum$ ã€‚è¿™æ°å¥½æ˜¯ä¸€ä¸ªåŒæŒ‡é’ˆç»å…¸é—®é¢˜ï¼šæŠŠæ•°ç»„ $A$ ä»å°åˆ°å¤§æ’åºï¼Œæ•°ç»„ $B$ ä»å¤§åˆ°å°æ’åºã€‚å¦‚æœ $A_i + B_j \ge sum$ ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‰¾åˆ°åˆæ³•çš„ä¸€å¯¹ï¼Œæ­¤æ—¶ $i++, j++$ ã€‚å¦‚æœ $A_i + B_j \lt sum$ ï¼Œæ­¤æ—¶ $i++$ ã€‚</p><div data-codeblock itemscope itemtype=https://schema.org/SoftwareSourceCode><button data-codebutton class=codebutton title="Copy code"><span>â§‰</span></button>
<meta itemprop=codeSampleType content="snippet"><meta data-codetext itemprop=text content="&#34;void solve() {\n  int n, k;\n  cin \u003e\u003e n \u003e\u003e k;\n\n  VI a(n), b(n);\n  For(i, 0, n) cin \u003e\u003e a[i];\n  For(i, 0, n) cin \u003e\u003e b[i];\n  sort(all(a));\n  sort(all(b), greater\u003cint\u003e());\n\n  auto check = [\u0026](ll sum) -\u003e bool {\n    ll res = 0;\n    for (int i = 0, j = 0; i \u003c n \u0026\u0026 j \u003c n;) {\n      if ((ll)a[i] + b[j] \u003e= sum) {\n        res++;\n        i++;\n        j++;\n      } else {\n        i++;\n      }\n    }\n    return res \u003e= k;\n  };\n\n  ll l = 1, r = 2e8 + 10, mid;\n  while (l \u003c r) {\n    mid = (l + r + 1) / 2;\n    if (check(mid))\n      l = mid;\n    else\n      r = mid - 1;\n  }\n\n  cout \u003c\u003c l \u003c\u003c '\\n';\n}&#34;"><meta itemprop=programmingLanguage content="cpp"><pre tabindex=0 class=chroma>
<code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>solve</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> n<span style=color:#1f2328>,</span> k<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  cin <span style=color:#0550ae>&gt;&gt;</span> n <span style=color:#0550ae>&gt;&gt;</span> k<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  VI a<span style=color:#1f2328>(</span>n<span style=color:#1f2328>),</span> b<span style=color:#1f2328>(</span>n<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  For<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> cin <span style=color:#0550ae>&gt;&gt;</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>  For<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> cin <span style=color:#0550ae>&gt;&gt;</span> b<span style=color:#1f2328>[</span>i<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>  sort<span style=color:#1f2328>(</span>all<span style=color:#1f2328>(</span>a<span style=color:#1f2328>));</span>
</span></span><span style=display:flex><span>  sort<span style=color:#1f2328>(</span>all<span style=color:#1f2328>(</span>b<span style=color:#1f2328>),</span> greater<span style=color:#0550ae>&lt;</span><span style=color:#cf222e>int</span><span style=color:#0550ae>&gt;</span><span style=color:#1f2328>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>auto</span> check <span style=color:#0550ae>=</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>&amp;</span><span style=color:#1f2328>](</span>ll sum<span style=color:#1f2328>)</span> <span style=color:#0550ae>-&gt;</span> <span style=color:#cf222e>bool</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    ll res <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>int</span> i <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>,</span> j <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span> i <span style=color:#0550ae>&lt;</span> n <span style=color:#0550ae>&amp;&amp;</span> j <span style=color:#0550ae>&lt;</span> n<span style=color:#1f2328>;)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      <span style=color:#cf222e>if</span> <span style=color:#1f2328>((</span>ll<span style=color:#1f2328>)</span>a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>+</span> b<span style=color:#1f2328>[</span>j<span style=color:#1f2328>]</span> <span style=color:#0550ae>&gt;=</span> sum<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>        res<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        i<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        j<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>      <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>        i<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>      <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>return</span> res <span style=color:#0550ae>&gt;=</span> k<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ll l <span style=color:#0550ae>=</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> r <span style=color:#0550ae>=</span> <span style=color:#0550ae>2e8</span> <span style=color:#0550ae>+</span> <span style=color:#0550ae>10</span><span style=color:#1f2328>,</span> mid<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>while</span> <span style=color:#1f2328>(</span>l <span style=color:#0550ae>&lt;</span> r<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    mid <span style=color:#0550ae>=</span> <span style=color:#1f2328>(</span>l <span style=color:#0550ae>+</span> r <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>)</span> <span style=color:#0550ae>/</span> <span style=color:#0550ae>2</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>check<span style=color:#1f2328>(</span>mid<span style=color:#1f2328>))</span>
</span></span><span style=display:flex><span>      l <span style=color:#0550ae>=</span> mid<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>else</span>
</span></span><span style=display:flex><span>      r <span style=color:#0550ae>=</span> mid <span style=color:#0550ae>-</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  cout <span style=color:#0550ae>&lt;&lt;</span> l <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39;\n&#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code>
</pre></div><h1 id=e-é‡æ’åˆ—>E. é‡æ’åˆ—</h1><p>å®¹æ˜“å‘ç°ï¼Œå¯¹ä¸¤ä¸ªæ•°ç»„æ’åºï¼Œä¸ä¼šå½±å“ç­”æ¡ˆã€‚</p><p>å¦‚æœæ’åºä¹‹åï¼Œè¿˜æ˜¯ä¸èƒ½å¤Ÿæ»¡è¶³æ¡ä»¶ï¼Œé‚£ä¹ˆæ— è§£ã€‚</p><p>å¦‚æœæœ‰è§£ï¼Œæˆ‘ä»¬å¯ä»¥æ±‚å‡ºæ–¹æ¡ˆæ•°ã€‚å¯¹äº $B_i$ ï¼Œæˆ‘ä»¬å¯ä»¥æ±‚å‡º $A_j \le B_i$ çš„æœ€å¤§çš„ $j$ ï¼Œä¹Ÿå°±æ˜¯è¯´ $A[1..j]$ ä¸­çš„æ‰€æœ‰æ•°å­—éƒ½å¯ä»¥æ”¾åœ¨ $B_i$ çš„ä½ç½®ã€‚å› ä¸º $B$ å·²ç»æ’å¥½åºäº†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è€ƒè™‘åˆ° $B[1..i-1]$ å®ƒä»¬å·²ç»å ç”¨çš„ä½ç½®ï¼Œå› æ­¤ $B_i$ å¯¹åº”çš„æ–¹æ¡ˆæ•°æ˜¯ $j - (i - 1)$ ï¼Œæ ¹æ®ä¹˜æ³•åŸç†ï¼ŒæŠŠæ‰€æœ‰çš„ $B_i$ å¯¹åº”çš„æ–¹æ¡ˆæ•°ç›¸ä¹˜å°±æ˜¯ç­”æ¡ˆã€‚</p><div data-codeblock itemscope itemtype=https://schema.org/SoftwareSourceCode><button data-codebutton class=codebutton title="Copy code"><span>â§‰</span></button>
<meta itemprop=codeSampleType content="snippet"><meta data-codetext itemprop=text content='"void solve() {\n  int n;\n  cin \u003e\u003e n;\n\n  VI a(n), b(n);\n  For(i, 0, n) cin \u003e\u003e a[i];\n  For(i, 0, n) cin \u003e\u003e b[i];\n  sort(all(a));\n  sort(all(b));\n\n  ll ans = 0;\n  int cnt = 0;\n  For(i, 0, n) {\n    if (a[i] \u003e b[i]) {\n      cout \u003c\u003c \"0\\n\";\n      return;\n    }\n  }\n\n  ans = 1;\n  for (int i = 0, j = 0; j \u003c n; j++) {\n    while (i \u003c n \u0026\u0026 a[i] \u003c= b[j])\n      i++;\n    ans = ans * (i - cnt) % MOD;\n    cnt++;\n  }\n  cout \u003c\u003c ans \u003c\u003c &#39;\\n&#39;;\n}"'><meta itemprop=programmingLanguage content="cpp"><pre tabindex=0 class=chroma>
<code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>solve</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  cin <span style=color:#0550ae>&gt;&gt;</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  VI a<span style=color:#1f2328>(</span>n<span style=color:#1f2328>),</span> b<span style=color:#1f2328>(</span>n<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  For<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> cin <span style=color:#0550ae>&gt;&gt;</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>  For<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> cin <span style=color:#0550ae>&gt;&gt;</span> b<span style=color:#1f2328>[</span>i<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>  sort<span style=color:#1f2328>(</span>all<span style=color:#1f2328>(</span>a<span style=color:#1f2328>));</span>
</span></span><span style=display:flex><span>  sort<span style=color:#1f2328>(</span>all<span style=color:#1f2328>(</span>b<span style=color:#1f2328>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ll ans <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> cnt <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  For<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>&gt;</span> b<span style=color:#1f2328>[</span>i<span style=color:#1f2328>])</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      cout <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#34;0</span><span style=color:#0a3069>\n</span><span style=color:#0a3069>&#34;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>      <span style=color:#cf222e>return</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ans <span style=color:#0550ae>=</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>int</span> i <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>,</span> j <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span> j <span style=color:#0550ae>&lt;</span> n<span style=color:#1f2328>;</span> j<span style=color:#0550ae>++</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>while</span> <span style=color:#1f2328>(</span>i <span style=color:#0550ae>&lt;</span> n <span style=color:#0550ae>&amp;&amp;</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>&lt;=</span> b<span style=color:#1f2328>[</span>j<span style=color:#1f2328>])</span>
</span></span><span style=display:flex><span>      i<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    ans <span style=color:#0550ae>=</span> ans <span style=color:#0550ae>*</span> <span style=color:#1f2328>(</span>i <span style=color:#0550ae>-</span> cnt<span style=color:#1f2328>)</span> <span style=color:#0550ae>%</span> MOD<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    cnt<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  cout <span style=color:#0550ae>&lt;&lt;</span> ans <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39;\n&#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code>
</pre></div><h1 id=f-å›¾>F. å›¾</h1><p>å¾ˆæœ‰æ„æ€çš„ä¸€é“é¢˜ç›®ã€‚</p><p>ç®€å•è·¯å¾„çš„å«ä¹‰æ˜¯ï¼Œè·¯å¾„ä¸Šä¸ç»è¿‡é‡å¤çš„ç‚¹ã€‚</p><p>å› ä¸ºé¢˜ç›®æ¡ä»¶ä¸­è¦æ±‚æ¯ä¸ªç‚¹ä»…æœ‰ä¸€æ¡å‡ºè¾¹ï¼Œæ‰€ä»¥è¿™ä¸ªå›¾å…¶å®å¹¶ä¸å¤æ‚ã€‚å¯èƒ½å­˜åœ¨ç¯ï¼Œå¦‚æœå­˜åœ¨ç¯ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç¯åˆ‡æ–­ä½œä¸ºè·¯å¾„çš„ä¸€éƒ¨åˆ†ã€‚</p><p>ç”»å›¾å¯ä»¥å‘ç°ï¼Œåˆ†æˆä¸€ä¸‹å‡ ç§æƒ…å†µï¼š</p><p>æœ€ç®€å•çš„æ˜¯ä¸€æ¡é“¾çš„æƒ…å†µã€‚</p><p>å¦‚æœå­˜åœ¨ç¯ï¼Œé‚£ä¹ˆå°±ä¸èƒ½â€œé€ƒâ€å‡ºå»äº†ï¼Œæ¯ä¸ªç‚¹çš„å…¥åº¦éƒ½æ°å¥½æ˜¯ 1.</p><p>ä¸€æ¡é“¾æˆ–è€…å¤šæ¡é“¾æœ€å¤šå¯ä»¥è¿æ¥åˆ°ä¸€ä¸ªç¯ä¸­ã€‚</p><p>ä¹Ÿå°±æ˜¯æœ€ç»ˆçš„ç­”æ¡ˆæ„æˆä¸€å®šæ˜¯ï¼šä¸€æ¡é“¾+å¯é€‰çš„ä¸€ä¸ªç¯ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‹“æ‰‘æ’åºï¼Œå¾—åˆ°æ‰€æœ‰çš„ç¯ï¼ŒåŒæ—¶å¾—åˆ°æ‰€æœ‰é“¾ä¸Šæ¯ä¸ªç‚¹çš„æ·±åº¦ï¼ˆä¹Ÿå°±æ˜¯ä»¥å½“å‰ç‚¹åšä¸ºç»ˆç‚¹çš„æœ€é•¿é“¾çš„é•¿åº¦ï¼‰ã€‚</p><p>ç„¶åå¯¹æ¯ä¸ªç¯è¿›è¡Œä¸€æ¬¡ DFSï¼Œæ±‚å‡ºç¯çš„å¤§å°ã€‚ç”¨ç¯å¤§å°åŠ ä¸Šé“¾é•¿åº¦ç»´æŠ¤ç­”æ¡ˆã€‚</p><div data-codeblock itemscope itemtype=https://schema.org/SoftwareSourceCode><button data-codebutton class=codebutton title="Copy code"><span>â§‰</span></button>
<meta itemprop=codeSampleType content="snippet"><meta data-codetext itemprop=text content="&#34;const int N = 1000100;\nint n, g[N], deg[N], dep[N];\nbool st[N];\n\nvoid Init() {\n  For1(i, 1, n) {\n    deg[i] = 0;\n    g[i] = -1;\n    st[i] = false;\n    dep[i] = 1;\n  }\n}\n\nint dfs(int u, int \u0026mx) {\n  st[u] = true;\n  ckmax(mx, dep[u]);\n\n  int res = 1, v = g[u];\n  if (!st[v]) {\n    res += dfs(v, mx);\n  }\n  return res;\n}\n\nvoid solve() {\n  cin \u003e\u003e n;\n  Init();\n  For1(i, 1, n) {\n    int x;\n    cin \u003e\u003e x;\n    g[i] = x;\n    deg[x]++;\n  }\n\n  queue\u003cint\u003e q;\n  For1(i, 1, n) {\n    if (deg[i] == 0) {\n      q.push(i);\n    }\n  }\n\n  while (!q.empty()) {\n    auto t = q.front();\n    st[t] = true;\n    q.pop();\n    int v = g[t];\n    ckmax(dep[v], dep[t] + 1);\n    deg[v]--;\n    if (deg[v] == 0) {\n      q.push(v);\n    }\n  }\n\n  int ans = 0;\n  For1(i, 1, n) {\n    if (!st[i]) {\n      int cur_dep = 0;\n      int sz = dfs(i, cur_dep), tmp = sz + cur_dep;\n      ckmax(ans, tmp - 1);\n    }\n  }\n  cout \u003c\u003c ans \u003c\u003c '\\n';\n}&#34;"><meta itemprop=programmingLanguage content="cpp"><pre tabindex=0 class=chroma>
<code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#cf222e>const</span> <span style=color:#cf222e>int</span> N <span style=color:#0550ae>=</span> <span style=color:#0550ae>1000100</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>int</span> n<span style=color:#1f2328>,</span> g<span style=color:#1f2328>[</span>N<span style=color:#1f2328>],</span> deg<span style=color:#1f2328>[</span>N<span style=color:#1f2328>],</span> dep<span style=color:#1f2328>[</span>N<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>bool</span> st<span style=color:#1f2328>[</span>N<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>Init</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  For1<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    deg<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    g<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0550ae>-</span><span style=color:#0550ae>1</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    st<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#6639ba>false</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    dep<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>int</span> <span style=color:#6639ba>dfs</span><span style=color:#1f2328>(</span><span style=color:#cf222e>int</span> u<span style=color:#1f2328>,</span> <span style=color:#cf222e>int</span> <span style=color:#0550ae>&amp;</span>mx<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  st<span style=color:#1f2328>[</span>u<span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#6639ba>true</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  ckmax<span style=color:#1f2328>(</span>mx<span style=color:#1f2328>,</span> dep<span style=color:#1f2328>[</span>u<span style=color:#1f2328>]);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> res <span style=color:#0550ae>=</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> v <span style=color:#0550ae>=</span> g<span style=color:#1f2328>[</span>u<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span><span style=color:#0550ae>!</span>st<span style=color:#1f2328>[</span>v<span style=color:#1f2328>])</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    res <span style=color:#0550ae>+=</span> dfs<span style=color:#1f2328>(</span>v<span style=color:#1f2328>,</span> mx<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>return</span> res<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>solve</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  cin <span style=color:#0550ae>&gt;&gt;</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  Init<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>  For1<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>int</span> x<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    cin <span style=color:#0550ae>&gt;&gt;</span> x<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    g<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> x<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    deg<span style=color:#1f2328>[</span>x<span style=color:#1f2328>]</span><span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  queue<span style=color:#0550ae>&lt;</span><span style=color:#cf222e>int</span><span style=color:#0550ae>&gt;</span> q<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  For1<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>deg<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>==</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      q<span style=color:#1f2328>.</span>push<span style=color:#1f2328>(</span>i<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>while</span> <span style=color:#1f2328>(</span><span style=color:#0550ae>!</span>q<span style=color:#1f2328>.</span>empty<span style=color:#1f2328>())</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>auto</span> t <span style=color:#0550ae>=</span> q<span style=color:#1f2328>.</span>front<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>    st<span style=color:#1f2328>[</span>t<span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#6639ba>true</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    q<span style=color:#1f2328>.</span>pop<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>int</span> v <span style=color:#0550ae>=</span> g<span style=color:#1f2328>[</span>t<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>    ckmax<span style=color:#1f2328>(</span>dep<span style=color:#1f2328>[</span>v<span style=color:#1f2328>],</span> dep<span style=color:#1f2328>[</span>t<span style=color:#1f2328>]</span> <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    deg<span style=color:#1f2328>[</span>v<span style=color:#1f2328>]</span><span style=color:#0550ae>--</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>deg<span style=color:#1f2328>[</span>v<span style=color:#1f2328>]</span> <span style=color:#0550ae>==</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      q<span style=color:#1f2328>.</span>push<span style=color:#1f2328>(</span>v<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> ans <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  For1<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span><span style=color:#0550ae>!</span>st<span style=color:#1f2328>[</span>i<span style=color:#1f2328>])</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      <span style=color:#cf222e>int</span> cur_dep <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>      <span style=color:#cf222e>int</span> sz <span style=color:#0550ae>=</span> dfs<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> cur_dep<span style=color:#1f2328>),</span> tmp <span style=color:#0550ae>=</span> sz <span style=color:#0550ae>+</span> cur_dep<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>      ckmax<span style=color:#1f2328>(</span>ans<span style=color:#1f2328>,</span> tmp <span style=color:#0550ae>-</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  cout <span style=color:#0550ae>&lt;&lt;</span> ans <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39;\n&#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code>
</pre></div></article></main><footer class="footer layout__footer mt--l"><p>This site is licensed under a <a href=https://creativecommons.org/licenses/by-sa/4.0/>CC-BY-SA 4.0</a> license.</p><p>Powered by <a href=https://gohugo.io/>Hugo</a> and the <a href=https://github.com/frjo/hugo-theme-zen>Zen theme</a>.</p></footer></div></body></html>