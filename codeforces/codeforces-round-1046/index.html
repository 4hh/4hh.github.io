<!doctype html><html class=nojs lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Codeforces Round 1046 (Div. 2) ABCD â€“ ç»ƒä¹ æœ¬</title><meta name=created content="2025-11-17T15:16:28+0800"><meta name=modified content="2025-11-17T15:16:28+0800"><meta name=author content="4hh"><meta name=contact content="abelhyphenabel@gmail.com"><meta property="og:site_name" content="ç»ƒä¹ æœ¬"><meta property="og:title" content="Codeforces Round 1046 (Div. 2) ABCD"><meta property="og:url" content="https://4hh.github.io/codeforces/codeforces-round-1046/"><meta property="og:type" content="article"><meta property="og:image" content="https://4hh.github.io/apple-touch-icon.png"><meta name=generator content="Hugo 0.152.2"><link rel=canonical href=https://4hh.github.io/codeforces/codeforces-round-1046/><link rel=apple-touch-icon href=/apple-touch-icon.png><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=manifest href=/site.webmanifest><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=stylesheet href=/css/styles.0e872d2201ff9e3f5960638608454cddfc35595a5107e23908f316ad8e7ab1ea.css><link rel=stylesheet href=/css/mobilemenu.dbbf7de443967fe1d83dce47fb19895d79710b23ccd02b84f54d4d39c37e3d2d.css media=screen><link rel=stylesheet href=/css/print.1912ba13950e7434fb50dd14d3951bc7f57bb0c16b4f204158b72f0b3844f7a1.css media=print><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","headline":"Codeforces Round 1046 (Div. 2) ABCD","datePublished":"2025-11-17T15:16:28+08:00","dateModified":"2025-11-17T15:16:28+08:00","url":"https://4hh.github.io/codeforces/codeforces-round-1046/","keywords":"Codeforces","image":"https://4hh.github.io/apple-touch-icon.png","author":{"@type":"Person","name":"4hh"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://4hh.github.io/"},"publisher":{"@type":"Organization","name":"ç»ƒä¹ æœ¬","logo":{"@type":"ImageObject","url":"https://4hh.github.io/apple-touch-icon.png"},"url":"https://4hh.github.io/"}}</script><script>(()=>{(function(){document.querySelector("html").classList.replace("nojs","js")})()})()</script><script defer src=/js/mobilemenu.7ce1f75fd1d49cd683a008352ad9001f800349629be01d531a19c02b5a84817b.js></script><script defer src=/js/codeblocks.6fb7809f1f612b9e1b838024f9517fe705761b9807a432b7708302ee3cec2808.js></script><script defer src=/js/script.f2979a93a325fecf9605263bd141398a311c8e23388ed7dcff74f92f7e632866.js></script><link rel=stylesheet href=/katex/katex.min.css><script defer src=/katex/katex.min.js></script><script defer src=/katex/contrib/auto-render.min.js></script><script defer src=/js/math.709e7cabd87ed8a988dc621ae40e371b50aca901ad9b6afadefac3e376945193.js></script><script src=/js/tracking.9222737f77e3c1f776b582208287ee51c0f0f1f966272abd374f8a51e1d35349.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-2EEKTZH351"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-2EEKTZH351")}</script></head><body class=single-page><div class="page layout__page"><header class="header layout__header"><a href=/ title=Home rel=home class=header__logo><img src=/images/logo.png width=64 height=64 alt=Home class=header__logo-image></a><h1 class=header__site-name><a href=/ title=Home class=header__site-link rel=home><span>ç»ƒä¹ æœ¬</span></a></h1><div class="region header__region"></div></header><nav class="main-menu mx--xs layout__navigation" aria-label="Main menu"><ul class="flex-inline mx--0"><li><a href=/><span>é¦–é¡µ</span></a></li><li><a href=/atcoder/><span>AtCoder</span></a></li><li><a href=/codeforces/ aria-current=page><span>Codeforces</span></a></li><li><a href=/leetcode/><span>LeetCode</span></a></li><li><a href=/misc/><span>å…¶ä»–</span></a></li><li><a href=/templates/><span>æ¨¡æ¿</span></a></li><li><a href=/tutorial/><span>ç®—æ³•ç«èµ›è¿›é˜¶æŒ‡å—</span></a></li><li><a href=/search/><span>æœç´¢</span></a></li></ul></nav><div class=mobile-nav dir=ltr hidden><div class=mobile-nav__cover></div><button class="mobile-nav__toggle button" aria-expanded=false aria-controls=sheet>
Menu
<svg class="mobile-nav__hamburger" viewBox="0 0 100 100" focusable="false" aria-hidden="true"><rect width="80" height="12" x="10" y="20" rx="5"/><rect width="80" height="12" x="10" y="45" rx="5"/><rect width="80" height="12" x="10" y="70" rx="5"/></svg></button><div class="mobile-nav__sheet link-inverted link-nav" id=sheet aria-hidden=true><div class=mobile-nav__region></div><nav class=mobile-nav__main-menu aria-label="Main menu"><ul class=mobile-nav__navbar><li><a href=/><span>é¦–é¡µ</span></a></li><li><a href=/atcoder/><span>AtCoder</span></a></li><li><a href=/codeforces/ aria-current=page><span>Codeforces</span></a></li><li><a href=/leetcode/><span>LeetCode</span></a></li><li><a href=/misc/><span>å…¶ä»–</span></a></li><li><a href=/templates/><span>æ¨¡æ¿</span></a></li><li><a href=/tutorial/><span>ç®—æ³•ç«èµ›è¿›é˜¶æŒ‡å—</span></a></li><li><a href=/search/><span>æœç´¢</span></a></li></ul></nav></div></div><main class="main layout__main"><article class="single-view single-view--codeforces"><header><h1 class=title>Codeforces Round 1046 (Div. 2) ABCD</h1><div class="tags meta">Tags:<ul class="flex-inline flex-inline--inline"><li><a href=/tags/codeforces/>Codeforces</a></li></ul></div></header><p>æ¯”èµ›ğŸ”— <a href=https://codeforces.com/contest/2136>Codeforces Round 1046 (Div. 2)</a></p><h1 id=a-in-the-dream>A. In the Dream</h1><p>åœ¨ä¸€ä¸ªåŠåœºä¸­ï¼Œæœ€åæƒ…å†µä¸‹èƒœè´Ÿæƒ…å†µæ˜¯ $AABAABAA$ è¿™ç§å½¢å¼ã€‚è®¾åˆ†æ•°è¾ƒå°çš„æ˜¯ $x$ ï¼Œé‚£ä¹ˆå¦å¤–ä¸€ä¸ªäººçš„å¾—åˆ†æ»¡è¶³ $y \le 2x + 2$</p><div data-codeblock itemscope itemtype=https://schema.org/SoftwareSourceCode><button data-codebutton class=codebutton title="Copy code"><span>â§‰</span></button>
<meta itemprop=codeSampleType content="snippet"><meta data-codetext itemprop=text content='"void solve() {\n  int a, b, c, d;\n\n  cin \u003e\u003e a \u003e\u003e b \u003e\u003e c \u003e\u003e d;\n\n  auto check = [\u0026](int a, int b) -\u003e bool {\n    if (a \u003e b)\n      swap(a, b);\n    return 2 * a + 2 \u003e= b;\n  };\n\n  if (check(a, b) \u0026\u0026 check(c - a, d - b))\n    YES();\n  else\n    NO();\n}"'><meta itemprop=programmingLanguage content="cpp"><pre tabindex=0 class=chroma>
<code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>solve</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> a<span style=color:#1f2328>,</span> b<span style=color:#1f2328>,</span> c<span style=color:#1f2328>,</span> d<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  cin <span style=color:#0550ae>&gt;&gt;</span> a <span style=color:#0550ae>&gt;&gt;</span> b <span style=color:#0550ae>&gt;&gt;</span> c <span style=color:#0550ae>&gt;&gt;</span> d<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>auto</span> check <span style=color:#0550ae>=</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>&amp;</span><span style=color:#1f2328>](</span><span style=color:#cf222e>int</span> a<span style=color:#1f2328>,</span> <span style=color:#cf222e>int</span> b<span style=color:#1f2328>)</span> <span style=color:#0550ae>-&gt;</span> <span style=color:#cf222e>bool</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>a <span style=color:#0550ae>&gt;</span> b<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>      swap<span style=color:#1f2328>(</span>a<span style=color:#1f2328>,</span> b<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>return</span> <span style=color:#0550ae>2</span> <span style=color:#0550ae>*</span> a <span style=color:#0550ae>+</span> <span style=color:#0550ae>2</span> <span style=color:#0550ae>&gt;=</span> b<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>check<span style=color:#1f2328>(</span>a<span style=color:#1f2328>,</span> b<span style=color:#1f2328>)</span> <span style=color:#0550ae>&amp;&amp;</span> check<span style=color:#1f2328>(</span>c <span style=color:#0550ae>-</span> a<span style=color:#1f2328>,</span> d <span style=color:#0550ae>-</span> b<span style=color:#1f2328>))</span>
</span></span><span style=display:flex><span>    YES<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>else</span>
</span></span><span style=display:flex><span>    NO<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code>
</pre></div><h1 id=b-like-the-bitset>B. Like the Bitset</h1><p>è¦æ±‚ä¸èƒ½æœ‰è¿ç»­çš„ $k$ ä¸ª 1. æ„é€ çš„æ—¶å€™ï¼Œå…ˆå¡« 0 çš„ä½ç½®ï¼Œå°½å¯èƒ½å¡«æ¯”è¾ƒå¤§çš„æ•°å­—ï¼Œå‰©ä¸‹çš„æ•°å­—å¡«åœ¨ 1 çš„ä½ç½®ã€‚</p><div data-codeblock itemscope itemtype=https://schema.org/SoftwareSourceCode><button data-codebutton class=codebutton title="Copy code"><span>â§‰</span></button>
<meta itemprop=codeSampleType content="snippet"><meta data-codetext itemprop=text content="&#34;void solve() {\n  int n, k;\n  cin \u003e\u003e n \u003e\u003e k;\n\n  string s;\n  cin \u003e\u003e s;\n  s = \&#34; \&#34; + s;\n\n  int cur = 0, cnt = 0;\n  bool ok = true;\n  VI zeros, ones;\n\n  For1(i, 1, n) {\n    if (s[i] == '1') {\n      cur++;\n      ones.pb(i);\n    } else {\n      cur = 0;\n      zeros.pb(i);\n    }\n\n    ckmax(cnt, cur);\n    if (cnt \u003e= k) {\n      ok = false;\n      break;\n    }\n  }\n\n  if (!ok) {\n    NO();\n    return;\n  }\n\n  int idx = n;\n  VI ans(n + 1);\n  for (auto x : zeros) {\n    ans[x] = idx--;\n  }\n  for (auto x : ones) {\n    ans[x] = idx--;\n  }\n  YES();\n  For1(i, 1, n) { cout \u003c\u003c ans[i] \u003c\u003c ' '; }\n  cout \u003c\u003c '\\n';\n}&#34;"><meta itemprop=programmingLanguage content="cpp"><pre tabindex=0 class=chroma>
<code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>solve</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> n<span style=color:#1f2328>,</span> k<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  cin <span style=color:#0550ae>&gt;&gt;</span> n <span style=color:#0550ae>&gt;&gt;</span> k<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  string s<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  cin <span style=color:#0550ae>&gt;&gt;</span> s<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  s <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#34; &#34;</span> <span style=color:#0550ae>+</span> s<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> cur <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>,</span> cnt <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>bool</span> ok <span style=color:#0550ae>=</span> <span style=color:#6639ba>true</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  VI zeros<span style=color:#1f2328>,</span> ones<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  For1<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>s<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>==</span> <span style=color:#0a3069>&#39;1&#39;</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      cur<span style=color:#0550ae>++</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>      ones<span style=color:#1f2328>.</span>pb<span style=color:#1f2328>(</span>i<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      cur <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>      zeros<span style=color:#1f2328>.</span>pb<span style=color:#1f2328>(</span>i<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ckmax<span style=color:#1f2328>(</span>cnt<span style=color:#1f2328>,</span> cur<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>cnt <span style=color:#0550ae>&gt;=</span> k<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      ok <span style=color:#0550ae>=</span> <span style=color:#6639ba>false</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>      <span style=color:#cf222e>break</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span><span style=color:#0550ae>!</span>ok<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    NO<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>return</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> idx <span style=color:#0550ae>=</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  VI ans<span style=color:#1f2328>(</span>n <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>auto</span> <span style=color:#900;font-weight:700>x</span> <span style=color:#1f2328>:</span> zeros<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    ans<span style=color:#1f2328>[</span>x<span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> idx<span style=color:#0550ae>--</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>auto</span> <span style=color:#900;font-weight:700>x</span> <span style=color:#1f2328>:</span> ones<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    ans<span style=color:#1f2328>[</span>x<span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> idx<span style=color:#0550ae>--</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  YES<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>  For1<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span> cout <span style=color:#0550ae>&lt;&lt;</span> ans<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39; &#39;</span><span style=color:#1f2328>;</span> <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  cout <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39;\n&#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code>
</pre></div><h1 id=c-against-the-difference>C. Against the Difference</h1><p>è®¾çŠ¶æ€ $d_i$ è¡¨ç¤ºå‰ $i$ ä¸ªä½ç½®ï¼Œæœ€é•¿åˆæ³•å­åºåˆ—çš„é•¿åº¦ã€‚æˆ‘ä»¬è®°å½•æ¯ä¸ªæ•°å­—çš„ä½ç½®åˆ°æ•°ç»„ $b$ ä¸­ï¼Œ $b[x]$ æ˜¯ $x$ å‡ºç°è¿‡çš„ä½ç½®çš„æ•°ç»„ã€‚å¯¹äºä½ç½® $i$ ï¼Œå¦‚æœ $b_{a_i}$ çš„é•¿åº¦ä¸å°äº $a_i$ ï¼Œé‚£ä¹ˆçŠ¶æ€è½¬ç§»åˆ° $d_{pre - 1}$ å…¶ä¸­ $pre = b[x][len - a_i]$</p><div data-codeblock itemscope itemtype=https://schema.org/SoftwareSourceCode><button data-codebutton class=codebutton title="Copy code"><span>â§‰</span></button>
<meta itemprop=codeSampleType content="snippet"><meta data-codetext itemprop=text content="&#34;void solve() {\n  int n;\n  cin \u003e\u003e n;\n\n  VI a(n + 1);\n  For1(i, 1, n) cin \u003e\u003e a[i];\n\n  VI d(n + 1);\n  VVI b(n + 1);\n  int ans = 0;\n\n  For1(i, 1, n) {\n    int x = a[i];\n    b[x].pb(i);\n\n    int len = SZ(b[x]);\n    if (len \u003e= x) {\n      int pre = b[x][len - x];\n      ckmax(d[i], d[pre - 1] + x);\n    }\n\n    ckmax(d[i], d[i - 1]);\n    ckmax(ans, d[i]);\n  }\n\n  cout \u003c\u003c ans \u003c\u003c '\\n';\n}&#34;"><meta itemprop=programmingLanguage content="cpp"><pre tabindex=0 class=chroma>
<code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>solve</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  cin <span style=color:#0550ae>&gt;&gt;</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  VI a<span style=color:#1f2328>(</span>n <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  For1<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> cin <span style=color:#0550ae>&gt;&gt;</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  VI d<span style=color:#1f2328>(</span>n <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  VVI b<span style=color:#1f2328>(</span>n <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> ans <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  For1<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>int</span> x <span style=color:#0550ae>=</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>    b<span style=color:#1f2328>[</span>x<span style=color:#1f2328>].</span>pb<span style=color:#1f2328>(</span>i<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>int</span> len <span style=color:#0550ae>=</span> SZ<span style=color:#1f2328>(</span>b<span style=color:#1f2328>[</span>x<span style=color:#1f2328>]);</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>len <span style=color:#0550ae>&gt;=</span> x<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      <span style=color:#cf222e>int</span> pre <span style=color:#0550ae>=</span> b<span style=color:#1f2328>[</span>x<span style=color:#1f2328>][</span>len <span style=color:#0550ae>-</span> x<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>      ckmax<span style=color:#1f2328>(</span>d<span style=color:#1f2328>[</span>i<span style=color:#1f2328>],</span> d<span style=color:#1f2328>[</span>pre <span style=color:#0550ae>-</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>+</span> x<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ckmax<span style=color:#1f2328>(</span>d<span style=color:#1f2328>[</span>i<span style=color:#1f2328>],</span> d<span style=color:#1f2328>[</span>i <span style=color:#0550ae>-</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>]);</span>
</span></span><span style=display:flex><span>    ckmax<span style=color:#1f2328>(</span>ans<span style=color:#1f2328>,</span> d<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]);</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  cout <span style=color:#0550ae>&lt;&lt;</span> ans <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39;\n&#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code>
</pre></div><h1 id=d-for-the-champion>D. For the Champion</h1><p>ç»™å®šçš„å¼å­ $min(|x_i - c| + |y_i - d|)$ ä¸­çš„ç»å¯¹å€¼ä¸å¥½å¤„ç†ã€‚è€ƒè™‘å¦‚ä½•å»æ‰ç»å¯¹å€¼ã€‚</p><p>ä»èµ·å§‹ä½ç½®ç§»åŠ¨åˆ°å³ä¸‹è§’åˆ° $c_1 = c + 2U, d_1 = d - 2U$ , å…¶ä¸­ $U = 10^9$ . è¿™æ ·å¯ä»¥ä¿è¯ $(c_1, d_1)$ ä¸€å®šåœ¨æ‰€æœ‰ç‚¹çš„å³ä¸‹æ–¹ã€‚</p><p>åŒç†ï¼Œä»èµ·å§‹ä½ç½®ç§»åŠ¨åˆ°å³ä¸Šè§’ $c_2 = c + 2U, d_2 = d + 2U$ , å…¶ä¸­ $U = 10^9$ . è¿™æ ·å¯ä»¥ä¿è¯ $(c_2, d_2)$ ä¸€å®šåœ¨æ‰€æœ‰ç‚¹çš„å³ä¸Šæ–¹ã€‚</p><p>ç„¶åå¯ä»¥æ ¹æ®å¯¹ $(c_1, d_1)$ å’Œ $(c_2, d_2)$ çš„è¯¢é—®ï¼Œå¾—åˆ°ä¸å¸¦ç»å¯¹å€¼çš„å¼å­å¯¹åº”çš„ç­”æ¡ˆã€‚å¾—åˆ°äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹ç»„ã€‚</p><div data-codeblock itemscope itemtype=https://schema.org/SoftwareSourceCode><button data-codebutton class=codebutton title="Copy code"><span>â§‰</span></button>
<meta itemprop=codeSampleType content="snippet"><meta data-codetext itemprop=text content="&#34;void solve() {\n  int n;\n  cin \u003e\u003e n;\n\n  vector\u003cPII\u003e a(n + 1);\n  int sub = 2e9 + 10, add = -2e9 - 10;\n\n  For1(i, 1, n) {\n    cin \u003e\u003e a[i].first \u003e\u003e a[i].second;\n    ckmin(sub, a[i].second - a[i].first);\n    ckmax(add, a[i].first + a[i].second);\n  }\n\n  auto query = [\u0026](char ch, int k) -\u003e ll {\n    cout \u003c\u003c \&#34;? \&#34; \u003c\u003c ch \u003c\u003c ' ' \u003c\u003c k \u003c\u003c endl;\n    ll dis;\n    cin \u003e\u003e dis;\n    return dis;\n  };\n\n  int U = 1e9;\n  query('R', U);\n  query('R', U);\n  query('D', U);\n  ll val1 = query('D', U);\n\n  query('U', U);\n  query('U', U);\n  query('U', U);\n  ll val2 = query('U', U);\n\n  ll t = 1LL * val2 + add - 4LL * U, s = 1LL * val1 - sub - 4LL * U;\n  ll x = (t + s) / 2, y = t - x;\n  cout \u003c\u003c \&#34;! \&#34; \u003c\u003c x \u003c\u003c ' ' \u003c\u003c y \u003c\u003c endl;\n}&#34;"><meta itemprop=programmingLanguage content="cpp"><pre tabindex=0 class=chroma>
<code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>solve</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  cin <span style=color:#0550ae>&gt;&gt;</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  vector<span style=color:#0550ae>&lt;</span>PII<span style=color:#0550ae>&gt;</span> a<span style=color:#1f2328>(</span>n <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> sub <span style=color:#0550ae>=</span> <span style=color:#0550ae>2e9</span> <span style=color:#0550ae>+</span> <span style=color:#0550ae>10</span><span style=color:#1f2328>,</span> add <span style=color:#0550ae>=</span> <span style=color:#0550ae>-</span><span style=color:#0550ae>2e9</span> <span style=color:#0550ae>-</span> <span style=color:#0550ae>10</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  For1<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    cin <span style=color:#0550ae>&gt;&gt;</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>].</span>first <span style=color:#0550ae>&gt;&gt;</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>].</span>second<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    ckmin<span style=color:#1f2328>(</span>sub<span style=color:#1f2328>,</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>].</span>second <span style=color:#0550ae>-</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>].</span>first<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    ckmax<span style=color:#1f2328>(</span>add<span style=color:#1f2328>,</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>].</span>first <span style=color:#0550ae>+</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>].</span>second<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>auto</span> query <span style=color:#0550ae>=</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>&amp;</span><span style=color:#1f2328>](</span><span style=color:#cf222e>char</span> ch<span style=color:#1f2328>,</span> <span style=color:#cf222e>int</span> k<span style=color:#1f2328>)</span> <span style=color:#0550ae>-&gt;</span> ll <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    cout <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#34;? &#34;</span> <span style=color:#0550ae>&lt;&lt;</span> ch <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39; &#39;</span> <span style=color:#0550ae>&lt;&lt;</span> k <span style=color:#0550ae>&lt;&lt;</span> endl<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    ll dis<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    cin <span style=color:#0550ae>&gt;&gt;</span> dis<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>return</span> dis<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> U <span style=color:#0550ae>=</span> <span style=color:#0550ae>1e9</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  query<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;R&#39;</span><span style=color:#1f2328>,</span> U<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  query<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;R&#39;</span><span style=color:#1f2328>,</span> U<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  query<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;D&#39;</span><span style=color:#1f2328>,</span> U<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  ll val1 <span style=color:#0550ae>=</span> query<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;D&#39;</span><span style=color:#1f2328>,</span> U<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  query<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;U&#39;</span><span style=color:#1f2328>,</span> U<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  query<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;U&#39;</span><span style=color:#1f2328>,</span> U<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  query<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;U&#39;</span><span style=color:#1f2328>,</span> U<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  ll val2 <span style=color:#0550ae>=</span> query<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;U&#39;</span><span style=color:#1f2328>,</span> U<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ll t <span style=color:#0550ae>=</span> <span style=color:#0550ae>1LL</span> <span style=color:#0550ae>*</span> val2 <span style=color:#0550ae>+</span> add <span style=color:#0550ae>-</span> <span style=color:#0550ae>4LL</span> <span style=color:#0550ae>*</span> U<span style=color:#1f2328>,</span> s <span style=color:#0550ae>=</span> <span style=color:#0550ae>1LL</span> <span style=color:#0550ae>*</span> val1 <span style=color:#0550ae>-</span> sub <span style=color:#0550ae>-</span> <span style=color:#0550ae>4LL</span> <span style=color:#0550ae>*</span> U<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  ll x <span style=color:#0550ae>=</span> <span style=color:#1f2328>(</span>t <span style=color:#0550ae>+</span> s<span style=color:#1f2328>)</span> <span style=color:#0550ae>/</span> <span style=color:#0550ae>2</span><span style=color:#1f2328>,</span> y <span style=color:#0550ae>=</span> t <span style=color:#0550ae>-</span> x<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  cout <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#34;! &#34;</span> <span style=color:#0550ae>&lt;&lt;</span> x <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39; &#39;</span> <span style=color:#0550ae>&lt;&lt;</span> y <span style=color:#0550ae>&lt;&lt;</span> endl<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code>
</pre></div></article></main><footer class="footer layout__footer mt--l"><p>This site is licensed under a <a href=https://creativecommons.org/licenses/by-sa/4.0/>CC-BY-SA 4.0</a> license.</p><p>Powered by <a href=https://gohugo.io/>Hugo</a> and the <a href=https://github.com/frjo/hugo-theme-zen>Zen theme</a>.</p></footer></div></body></html>