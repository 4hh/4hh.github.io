<!doctype html><html class=nojs lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Codeforces Round 1044 (Div. 2) ABCD â€“ ç»ƒä¹ æœ¬</title><meta name=created content="2025-11-18T16:22:35+0800"><meta name=modified content="2025-11-18T16:22:35+0800"><meta name=author content="4hh"><meta name=contact content="abelhyphenabel@gmail.com"><meta property="og:site_name" content="ç»ƒä¹ æœ¬"><meta property="og:title" content="Codeforces Round 1044 (Div. 2) ABCD"><meta property="og:url" content="https://4hh.github.io/codeforces/codeforces-round-1044/"><meta property="og:type" content="article"><meta property="og:image" content="https://4hh.github.io/apple-touch-icon.png"><meta name=generator content="Hugo 0.152.2"><link rel=canonical href=https://4hh.github.io/codeforces/codeforces-round-1044/><link rel=apple-touch-icon href=/apple-touch-icon.png><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=manifest href=/site.webmanifest><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=stylesheet href=/css/styles.0e872d2201ff9e3f5960638608454cddfc35595a5107e23908f316ad8e7ab1ea.css><link rel=stylesheet href=/css/mobilemenu.dbbf7de443967fe1d83dce47fb19895d79710b23ccd02b84f54d4d39c37e3d2d.css media=screen><link rel=stylesheet href=/css/print.1912ba13950e7434fb50dd14d3951bc7f57bb0c16b4f204158b72f0b3844f7a1.css media=print><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","headline":"Codeforces Round 1044 (Div. 2) ABCD","datePublished":"2025-11-18T16:22:35+08:00","dateModified":"2025-11-18T16:22:35+08:00","url":"https://4hh.github.io/codeforces/codeforces-round-1044/","keywords":"Codeforces","image":"https://4hh.github.io/apple-touch-icon.png","author":{"@type":"Person","name":"4hh"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://4hh.github.io/"},"publisher":{"@type":"Organization","name":"ç»ƒä¹ æœ¬","logo":{"@type":"ImageObject","url":"https://4hh.github.io/apple-touch-icon.png"},"url":"https://4hh.github.io/"}}</script><script>(()=>{(function(){document.querySelector("html").classList.replace("nojs","js")})()})()</script><script defer src=/js/mobilemenu.7ce1f75fd1d49cd683a008352ad9001f800349629be01d531a19c02b5a84817b.js></script><script defer src=/js/codeblocks.6fb7809f1f612b9e1b838024f9517fe705761b9807a432b7708302ee3cec2808.js></script><script defer src=/js/script.f2979a93a325fecf9605263bd141398a311c8e23388ed7dcff74f92f7e632866.js></script><link rel=stylesheet href=/katex/katex.min.css><script defer src=/katex/katex.min.js></script><script defer src=/katex/contrib/auto-render.min.js></script><script defer src=/js/math.709e7cabd87ed8a988dc621ae40e371b50aca901ad9b6afadefac3e376945193.js></script><script src=/js/tracking.9222737f77e3c1f776b582208287ee51c0f0f1f966272abd374f8a51e1d35349.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-2EEKTZH351"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-2EEKTZH351")}</script></head><body class=single-page><div class="page layout__page"><header class="header layout__header"><a href=/ title=Home rel=home class=header__logo><img src=/images/logo.png width=64 height=64 alt=Home class=header__logo-image></a><h1 class=header__site-name><a href=/ title=Home class=header__site-link rel=home><span>ç»ƒä¹ æœ¬</span></a></h1><div class="region header__region"></div></header><nav class="main-menu mx--xs layout__navigation" aria-label="Main menu"><ul class="flex-inline mx--0"><li><a href=/><span>é¦–é¡µ</span></a></li><li><a href=/atcoder/><span>AtCoder</span></a></li><li><a href=/codeforces/ aria-current=page><span>Codeforces</span></a></li><li><a href=/leetcode/><span>LeetCode</span></a></li><li><a href=/misc/><span>å…¶ä»–</span></a></li><li><a href=/templates/><span>æ¨¡æ¿</span></a></li><li><a href=/tutorial/><span>ç®—æ³•ç«èµ›è¿›é˜¶æŒ‡å—</span></a></li><li><a href=/search/><span>æœç´¢</span></a></li></ul></nav><div class=mobile-nav dir=ltr hidden><div class=mobile-nav__cover></div><button class="mobile-nav__toggle button" aria-expanded=false aria-controls=sheet>
Menu
<svg class="mobile-nav__hamburger" viewBox="0 0 100 100" focusable="false" aria-hidden="true"><rect width="80" height="12" x="10" y="20" rx="5"/><rect width="80" height="12" x="10" y="45" rx="5"/><rect width="80" height="12" x="10" y="70" rx="5"/></svg></button><div class="mobile-nav__sheet link-inverted link-nav" id=sheet aria-hidden=true><div class=mobile-nav__region></div><nav class=mobile-nav__main-menu aria-label="Main menu"><ul class=mobile-nav__navbar><li><a href=/><span>é¦–é¡µ</span></a></li><li><a href=/atcoder/><span>AtCoder</span></a></li><li><a href=/codeforces/ aria-current=page><span>Codeforces</span></a></li><li><a href=/leetcode/><span>LeetCode</span></a></li><li><a href=/misc/><span>å…¶ä»–</span></a></li><li><a href=/templates/><span>æ¨¡æ¿</span></a></li><li><a href=/tutorial/><span>ç®—æ³•ç«èµ›è¿›é˜¶æŒ‡å—</span></a></li><li><a href=/search/><span>æœç´¢</span></a></li></ul></nav></div></div><main class="main layout__main"><article class="single-view single-view--codeforces"><header><h1 class=title>Codeforces Round 1044 (Div. 2) ABCD</h1><div class="tags meta">Tags:<ul class="flex-inline flex-inline--inline"><li><a href=/tags/codeforces/>Codeforces</a></li></ul></div></header><p>é¢˜ç›®ğŸ”— <a href=https://codeforces.com/contest/2133>Codeforces Round 1044 (Div. 2)</a></p><h1 id=a-redstone>A. Redstone?</h1><p>åˆ—å…¬å¼å‘ç°è¦æ±‚æœ€åä¸€ä¸ªé½¿è½®çš„å¤§å°è¦å’Œç¬¬ä¸€ä¸ªé½¿è½®çš„å¤§å°ä¸€æ ·ã€‚ä¹Ÿå°±æ˜¯è¦æ±‚æ•°ç»„ä¸­å­˜åœ¨å‡ºç°è‡³å°‘ä¸¤æ¬¡çš„æ•°å­—ã€‚</p><div data-codeblock itemscope itemtype=https://schema.org/SoftwareSourceCode><button data-codebutton class=codebutton title="Copy code"><span>â§‰</span></button>
<meta itemprop=codeSampleType content="snippet"><meta data-codetext itemprop=text content='"void solve() {\n  int n;\n  cin \u003e\u003e n;\n\n  vector\u003cint\u003e a(n + 1), vis(120);\n  bool ok = false;\n  For1(i, 1, n) {\n    cin \u003e\u003e a[i];\n    if (vis[a[i]]) {\n      ok = true;\n    }\n    vis[a[i]] = true;\n  }\n  if (ok)\n    YES();\n  else\n    NO();\n}"'><meta itemprop=programmingLanguage content="cpp"><pre tabindex=0 class=chroma>
<code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>solve</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  cin <span style=color:#0550ae>&gt;&gt;</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  vector<span style=color:#0550ae>&lt;</span><span style=color:#cf222e>int</span><span style=color:#0550ae>&gt;</span> a<span style=color:#1f2328>(</span>n <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>),</span> vis<span style=color:#1f2328>(</span><span style=color:#0550ae>120</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>bool</span> ok <span style=color:#0550ae>=</span> <span style=color:#6639ba>false</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  For1<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    cin <span style=color:#0550ae>&gt;&gt;</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>vis<span style=color:#1f2328>[</span>a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]])</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      ok <span style=color:#0550ae>=</span> <span style=color:#6639ba>true</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>    vis<span style=color:#1f2328>[</span>a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]]</span> <span style=color:#0550ae>=</span> <span style=color:#6639ba>true</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>ok<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>    YES<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>else</span>
</span></span><span style=display:flex><span>    NO<span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code>
</pre></div><h1 id=b-villagers>B. Villagers</h1><p>ä¸ºäº†è®©æ€»èŠ±è´¹æœ€å°ï¼ŒæŠŠæ•°ç»„æ’åºï¼Œé€‰æ‹©æœ€å¤§çš„ä¸¤ä¸ªï¼Œè®©è¿™ä¸¤ä¸ªå…ƒç´ å’Œè§£ã€‚è¿™æ ·ä»å¤§åˆ°å°ä¸¤ä¸¤é…å¯¹å³å¯ã€‚</p><div data-codeblock itemscope itemtype=https://schema.org/SoftwareSourceCode><button data-codebutton class=codebutton title="Copy code"><span>â§‰</span></button>
<meta itemprop=codeSampleType content="snippet"><meta data-codetext itemprop=text content="&#34;void solve() {\n  int n;\n  cin \u003e\u003e n;\n\n  vector\u003cint\u003e a(n + 1);\n  for (int i = 1; i \u003c= n; i++) {\n    cin \u003e\u003e a[i];\n  }\n  sort(a.begin() + 1, a.begin() + 1 + n);\n  ll ans{};\n  for (int i = n; i \u003e= 1; i -= 2) {\n    ans += a[i];\n  }\n  cout \u003c\u003c ans \u003c\u003c '\\n';\n}&#34;"><meta itemprop=programmingLanguage content="cpp"><pre tabindex=0 class=chroma>
<code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>solve</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  cin <span style=color:#0550ae>&gt;&gt;</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  vector<span style=color:#0550ae>&lt;</span><span style=color:#cf222e>int</span><span style=color:#0550ae>&gt;</span> a<span style=color:#1f2328>(</span>n <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>int</span> i <span style=color:#0550ae>=</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>;</span> i <span style=color:#0550ae>&lt;=</span> n<span style=color:#1f2328>;</span> i<span style=color:#0550ae>++</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    cin <span style=color:#0550ae>&gt;&gt;</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  sort<span style=color:#1f2328>(</span>a<span style=color:#1f2328>.</span>begin<span style=color:#1f2328>()</span> <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> a<span style=color:#1f2328>.</span>begin<span style=color:#1f2328>()</span> <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span> <span style=color:#0550ae>+</span> n<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  ll ans<span style=color:#1f2328>{};</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>int</span> i <span style=color:#0550ae>=</span> n<span style=color:#1f2328>;</span> i <span style=color:#0550ae>&gt;=</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>;</span> i <span style=color:#0550ae>-=</span> <span style=color:#0550ae>2</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    ans <span style=color:#0550ae>+=</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  cout <span style=color:#0550ae>&lt;&lt;</span> ans <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39;\n&#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code>
</pre></div><h1 id=c-the-nether>C. The Nether</h1><p>ä»¥æ¯ä¸ªèŠ‚ç‚¹ä½œä¸ºèµ·ç‚¹è¯¢é—®ï¼Œå®¹æ˜“æ‰¾åˆ°æœ€å¤§è·¯å¾„çš„é•¿åº¦ $len$</p><p>è€ƒè™‘å¦‚ä½•æ‰¾åˆ°è·¯å¾„çš„ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œè®¾è¿™ä¸ªèŠ‚ç‚¹æ˜¯ $p$ ï¼Œé‚£ä¹ˆä»¥ $p$ å¼€å¤´çš„æœ€é•¿è·¯å¾„å¿…ç„¶æ˜¯ $len - 1$ , å¹¶ä¸”ä»¥ $start$ ä½œä¸ºèµ·ç‚¹ï¼Œ $p$ ä½œä¸ºç»ˆç‚¹ï¼Œè·¯å¾„é•¿åº¦éœ€è¦æ°å¥½æ˜¯ 2.</p><p>åœ¨ç¬¬ä¸€éè¯¢é—®çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®°å½•æ¯ä¸ªé•¿åº¦å¯¹åº”çš„ç‚¹çš„åˆ—è¡¨ã€‚æˆ‘ä»¬å°±å¯ä»¥å®¹æ˜“æ‰¾åˆ° $len - 1$ å¯¹åº”çš„ç‚¹ï¼Œç„¶åä»¥ $start$ ä¸ºèµ·ç‚¹ï¼Œ $p$ ä½œä¸ºå¦å¤–ä¸€ä¸ªç‚¹è¯¢é—®ï¼Œæ‰¾ç­”æ¡ˆæ°å¥½æ˜¯ 2 çš„å…ƒç´ ã€‚ä¾æ­¤ç±»æ¨ï¼Œå¯ä»¥æ‰¾åˆ°æ‰€æœ‰çš„ $len$ ä¸ªç‚¹ã€‚</p><p>é—®é¢˜çš„å…³é”®ï¼šæˆ‘ä»¬å‘ç°ç¬¬äºŒéè¯¢é—®çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªç‚¹æœ€å¤šåªä¼šè¢«è¯¢é—®ä¸€æ¬¡ã€‚æ‰€ä»¥è¿™ä¸ªåšæ³•æ˜¯æ­£ç¡®çš„ã€‚</p><div data-codeblock itemscope itemtype=https://schema.org/SoftwareSourceCode><button data-codebutton class=codebutton title="Copy code"><span>â§‰</span></button>
<meta itemprop=codeSampleType content="snippet"><meta data-codetext itemprop=text content='"void solve() {\n  int n;\n  cin \u003e\u003e n;\n\n  auto query = [\u0026](int start) -\u003e int {\n    cout \u003c\u003c \"? \" \u003c\u003c start \u003c\u003c \" \" \u003c\u003c n;\n    for (int i = 1; i \u003c= n; i++) {\n      cout \u003c\u003c \" \" \u003c\u003c i;\n    }\n    cout \u003c\u003c endl;\n\n    int len;\n    cin \u003e\u003e len;\n    return len;\n  };\n  auto query2 = [\u0026](int p1, int p2) -\u003e bool {\n    cout \u003c\u003c \"? \" \u003c\u003c p1 \u003c\u003c \" 2 \" \u003c\u003c p1 \u003c\u003c &#39; &#39; \u003c\u003c p2 \u003c\u003c endl;\n    int len;\n    cin \u003e\u003e len;\n    return len == 2;\n  };\n\n  map\u003cint, vector\u003cint\u003e\u003e mp;\n  int mx = 0;\n  for (int i = 1; i \u003c= n; i++) {\n    int len = query(i);\n    mp[len].push_back(i);\n    ckmax(mx, len);\n  }\n\n  vector\u003cint\u003e ans;\n  int p1 = mp[mx][0], len = mx;\n  ans.push_back(p1);\n  for (int i = len - 1; i \u003e= 1; i--) {\n    for (auto v : mp[i]) {\n      if (query2(p1, v)) {\n        ans.push_back(v);\n        p1 = v;\n        break;\n      }\n    }\n  }\n\n  cout \u003c\u003c \"! \" \u003c\u003c mx;\n  for (auto i : ans) {\n    cout \u003c\u003c \" \" \u003c\u003c i;\n  }\n  cout \u003c\u003c endl;\n}"'><meta itemprop=programmingLanguage content="cpp"><pre tabindex=0 class=chroma>
<code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>solve</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  cin <span style=color:#0550ae>&gt;&gt;</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>auto</span> query <span style=color:#0550ae>=</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>&amp;</span><span style=color:#1f2328>](</span><span style=color:#cf222e>int</span> start<span style=color:#1f2328>)</span> <span style=color:#0550ae>-&gt;</span> <span style=color:#cf222e>int</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    cout <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#34;? &#34;</span> <span style=color:#0550ae>&lt;&lt;</span> start <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#34; &#34;</span> <span style=color:#0550ae>&lt;&lt;</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>int</span> i <span style=color:#0550ae>=</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>;</span> i <span style=color:#0550ae>&lt;=</span> n<span style=color:#1f2328>;</span> i<span style=color:#0550ae>++</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      cout <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#34; &#34;</span> <span style=color:#0550ae>&lt;&lt;</span> i<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>    cout <span style=color:#0550ae>&lt;&lt;</span> endl<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>int</span> len<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    cin <span style=color:#0550ae>&gt;&gt;</span> len<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>return</span> len<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>};</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>auto</span> query2 <span style=color:#0550ae>=</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>&amp;</span><span style=color:#1f2328>](</span><span style=color:#cf222e>int</span> p1<span style=color:#1f2328>,</span> <span style=color:#cf222e>int</span> p2<span style=color:#1f2328>)</span> <span style=color:#0550ae>-&gt;</span> <span style=color:#cf222e>bool</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    cout <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#34;? &#34;</span> <span style=color:#0550ae>&lt;&lt;</span> p1 <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#34; 2 &#34;</span> <span style=color:#0550ae>&lt;&lt;</span> p1 <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39; &#39;</span> <span style=color:#0550ae>&lt;&lt;</span> p2 <span style=color:#0550ae>&lt;&lt;</span> endl<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>int</span> len<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    cin <span style=color:#0550ae>&gt;&gt;</span> len<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>return</span> len <span style=color:#0550ae>==</span> <span style=color:#0550ae>2</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  map<span style=color:#0550ae>&lt;</span><span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> vector<span style=color:#0550ae>&lt;</span><span style=color:#cf222e>int</span><span style=color:#0550ae>&gt;&gt;</span> mp<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> mx <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>int</span> i <span style=color:#0550ae>=</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>;</span> i <span style=color:#0550ae>&lt;=</span> n<span style=color:#1f2328>;</span> i<span style=color:#0550ae>++</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>int</span> len <span style=color:#0550ae>=</span> query<span style=color:#1f2328>(</span>i<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    mp<span style=color:#1f2328>[</span>len<span style=color:#1f2328>].</span>push_back<span style=color:#1f2328>(</span>i<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    ckmax<span style=color:#1f2328>(</span>mx<span style=color:#1f2328>,</span> len<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  vector<span style=color:#0550ae>&lt;</span><span style=color:#cf222e>int</span><span style=color:#0550ae>&gt;</span> ans<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> p1 <span style=color:#0550ae>=</span> mp<span style=color:#1f2328>[</span>mx<span style=color:#1f2328>][</span><span style=color:#0550ae>0</span><span style=color:#1f2328>],</span> len <span style=color:#0550ae>=</span> mx<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  ans<span style=color:#1f2328>.</span>push_back<span style=color:#1f2328>(</span>p1<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>int</span> i <span style=color:#0550ae>=</span> len <span style=color:#0550ae>-</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>;</span> i <span style=color:#0550ae>&gt;=</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>;</span> i<span style=color:#0550ae>--</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>auto</span> <span style=color:#900;font-weight:700>v</span> <span style=color:#1f2328>:</span> mp<span style=color:#1f2328>[</span>i<span style=color:#1f2328>])</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>      <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>query2<span style=color:#1f2328>(</span>p1<span style=color:#1f2328>,</span> v<span style=color:#1f2328>))</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>        ans<span style=color:#1f2328>.</span>push_back<span style=color:#1f2328>(</span>v<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>        p1 <span style=color:#0550ae>=</span> v<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>break</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>      <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  cout <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#34;! &#34;</span> <span style=color:#0550ae>&lt;&lt;</span> mx<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>auto</span> <span style=color:#900;font-weight:700>i</span> <span style=color:#1f2328>:</span> ans<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    cout <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#34; &#34;</span> <span style=color:#0550ae>&lt;&lt;</span> i<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>  cout <span style=color:#0550ae>&lt;&lt;</span> endl<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code>
</pre></div><h1 id=d-chicken-jockey>D. Chicken Jockey</h1><p>æœ‰è¶£çš„ DP é¢˜</p><p>æ³¨æ„åˆ°æˆ‘ä»¬éœ€è¦é€ æˆçš„ä¼¤å®³æ€»é‡æ˜¯å›ºå®šçš„ï¼Œæ€»ä¼¤å®³åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šå è½ä¼¤å®³å’Œæ™®æ”»ä¼¤å®³ã€‚æˆ‘ä»¬éœ€è¦æœ€å¤§åŒ–å è½ä¼¤å®³ï¼Œæœ€å°åŒ–æ™®æ”»ä¼¤å®³ã€‚</p><p>è®¾ $d_i$ ä»£è¡¨ï¼Œæ¶ˆç­å‰ $i$ ä¸ªå…ƒç´ ï¼Œéœ€è¦çš„æ™®æ”»ä¼¤å®³çš„æœ€å°å€¼ã€‚</p><p>å¯¹äºä½ç½® $i$ ï¼Œå¦‚æœè¦å¯¹å®ƒé€ æˆå è½ä¼¤å®³ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å‰ $i - 1$ ä¸ªä½ç½®ã€‚ç›´æ¥å¯¹ $i$ é€ æˆå è½ä¼¤å®³çš„æ—¶åˆ»ï¼Œä¸€å®šæ˜¯ $i - 1$ æ¶ˆå¤±çš„æ—¶åˆ»ã€‚</p><p>æœ€ç®€å•çš„æƒ…å†µæ˜¯ï¼Œç›´æ¥æ€æ‰ $i - 1$ ï¼Œæ­¤æ—¶çŠ¶æ€è½¬ç§»æ˜¯ $d_{i - 2} + a_{i - 1} + max(0, a_i - (i - 1))$</p><p>å¦å¤–ä¸€ç§æƒ…å†µæ˜¯ï¼Œä¸ç›´æ¥æ€æ‰ $i - 1$ , æ€»ä¹‹æˆ‘ä»¬éœ€è¦è®©å‰ $i - 1$ ç»™è¢«æ¶ˆç­ï¼Œæ­¤æ—¶åªå‰©ä¸‹ç¬¬ $i - 1$ ä¸ªå…ƒç´ ï¼Œç¬¬ $i$ ä¸ªå…ƒç´ çš„å è½ä¼¤å®³åªæœ‰ 1. è€Œæ¶ˆç­å‰ $i - 1$ ä¸ªå…ƒç´ çš„æœ€å°ä»£ä»·ï¼Œæ°å¥½æ˜¯æˆ‘ä»¬çš„çŠ¶æ€å®šä¹‰ï¼Œè¿™æ˜¯ä¸€ä¸ªå­é—®é¢˜ï¼Œå› æ­¤çŠ¶æ€è½¬ç§»æ˜¯ $d_i = d_{i - 1} + (a_i - 1)$</p><div data-codeblock itemscope itemtype=https://schema.org/SoftwareSourceCode><button data-codebutton class=codebutton title="Copy code"><span>â§‰</span></button>
<meta itemprop=codeSampleType content="snippet"><meta data-codetext itemprop=text content="&#34;void solve() {\n  int n;\n  cin \u003e\u003e n;\n\n  VI a(n + 1);\n  for (int i = 1; i \u003c= n; i++)\n    cin \u003e\u003e a[i];\n\n  VL d(n + 1, INFL);\n  d[0] = 0;\n  d[1] = a[1];\n\n  For1(i, 2, n) {\n    d[i] = d[i - 1] + a[i] - 1;\n    ckmin(d[i], d[i - 2] + a[i - 1] + max(0, a[i] - (i - 1)));\n  }\n\n  cout \u003c\u003c d[n] \u003c\u003c '\\n';\n}&#34;"><meta itemprop=programmingLanguage content="cpp"><pre tabindex=0 class=chroma>
<code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#cf222e>void</span> <span style=color:#6639ba>solve</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>int</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  cin <span style=color:#0550ae>&gt;&gt;</span> n<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  VI a<span style=color:#1f2328>(</span>n <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>int</span> i <span style=color:#0550ae>=</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>;</span> i <span style=color:#0550ae>&lt;=</span> n<span style=color:#1f2328>;</span> i<span style=color:#0550ae>++</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>    cin <span style=color:#0550ae>&gt;&gt;</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  VL d<span style=color:#1f2328>(</span>n <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> INFL<span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  d<span style=color:#1f2328>[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>  d<span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> a<span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  For1<span style=color:#1f2328>(</span>i<span style=color:#1f2328>,</span> <span style=color:#0550ae>2</span><span style=color:#1f2328>,</span> n<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>    d<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> d<span style=color:#1f2328>[</span>i <span style=color:#0550ae>-</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>+</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>-</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    ckmin<span style=color:#1f2328>(</span>d<span style=color:#1f2328>[</span>i<span style=color:#1f2328>],</span> d<span style=color:#1f2328>[</span>i <span style=color:#0550ae>-</span> <span style=color:#0550ae>2</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>+</span> a<span style=color:#1f2328>[</span>i <span style=color:#0550ae>-</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>+</span> max<span style=color:#1f2328>(</span><span style=color:#0550ae>0</span><span style=color:#1f2328>,</span> a<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>-</span> <span style=color:#1f2328>(</span>i <span style=color:#0550ae>-</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>)));</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  cout <span style=color:#0550ae>&lt;&lt;</span> d<span style=color:#1f2328>[</span>n<span style=color:#1f2328>]</span> <span style=color:#0550ae>&lt;&lt;</span> <span style=color:#0a3069>&#39;\n&#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code>
</pre></div></article></main><footer class="footer layout__footer mt--l"><p>This site is licensed under a <a href=https://creativecommons.org/licenses/by-sa/4.0/>CC-BY-SA 4.0</a> license.</p><p>Powered by <a href=https://gohugo.io/>Hugo</a> and the <a href=https://github.com/frjo/hugo-theme-zen>Zen theme</a>.</p></footer></div></body></html>